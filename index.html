<!doctype html>
<html lang="uk">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link rel="apple-touch-icon" sizes="180x180" href="images/png/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/png/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/png/favicon-16x16.png">
<link rel="manifest" href="images/png/site.webmanifest">
<link rel="mask-icon" href="images/png/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


    <title>KRZHV | Психологічна допомога</title>
  </head>
  <body>
    <section class="logo">
      <h1><img src="images/logo.png" />KRZHV</h1>

      <img src="images/timer.png" width="64px" height="64px" class="timer" />
    </section>
<div id="footer" class="container">
    <div class="text-block">
        <a href="https://t.me/krzhvs" class="link" target="_blank">Telegram</a>
        <a href="mailto:krzhv@proton.me" class="link" target="_blank">Email</a>
        <a href="https://www.linkedin.com/in/korzhov-sv/" class="link" target="_blank">LinkedIn</a>
    </div>
</div>

    
    <h2>Відгуки:</h2>
    <div id="messagesList">Loading...</div>

    <script type="module">
      // 1. Імпортуємо функції Firebase (це бібліотека Google)
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

      // 2. ВАШІ НАЛАШТУВАННЯ (Вставте сюди дані з консолі Firebase)
      // Замініть об'єкт нижче на той, що ви скопіювали на Етапі 1
      const firebaseConfig = {
        apiKey: "ТУТ_ВАШ_ДОВГИЙ_КЛЮЧ",
        authDomain: "ваш-проект.firebaseapp.com",
        projectId: "ваш-проект",
        storageBucket: "ваш-проект.appspot.com",
        messagingSenderId: "числа",
        appId: "числа-і-літери"
      };

      // 3. Запускаємо Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // 4. Логіка: Що робити, коли натиснули кнопку
      document.getElementById('sendBtn').addEventListener('click', async () => {
          const name = document.getElementById('nameInput').value;
          const msg = document.getElementById('msgInput').value;

          if(name && msg) {
              try {
                  // Записуємо в колекцію "reviews"
                  await addDoc(collection(db, "reviews"), {
                      name: name,
                      message: msg,
                      date: new Date() // додаємо час, щоб сортувати
                  });
                  // Очищаємо поля
                  document.getElementById('msgInput').value = ''; 
              } catch (e) {
                  console.error("Помилка: ", e);
                  alert("Не вдалося відправити");
              }
          } else {
              alert("Заповніть всі поля!");
          }
      });

      // 5. Логіка: Читаємо дані в реальному часі
      // Ця функція спрацьовує сама, коли в базі щось змінюється
      const q = query(collection(db, "reviews"), orderBy("date", "desc"));
      
      onSnapshot(q, (snapshot) => {
          const list = document.getElementById('messagesList');
          list.innerHTML = ""; // Очистити список перед оновленням

          snapshot.forEach((doc) => {
              const data = doc.data();
              // Створюємо HTML для кожного відгуку
              const item = document.createElement("div");
              item.className = "message-box";
              item.innerHTML = `<strong>${data.name}:</strong> ${data.message}`;
              list.appendChild(item);
          });
      });
    </script>
    


    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
  </body>
</html>

